dist: xenial

language: python

python:
  - 3.6
  - 3.7
  - 3.8-dev

env:
  - PIPENV_VERBOSITY=-1

install:
  - pip install --upgrade pip
  - pip install -U pipenv
  - pipenv install --dev -e .

script:
  - pipenv run py.test --cov=parselglossy tests/ --doctest-module
  - pipenv run py.test --flake8 parselglossy
  - pipenv run py.test --mypy parselglossy

after_success:
  - pipenv run codecov

deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: robertodr
  password:
    secure: ZWSXGsf6P/SkH/dxxYVCtTsGnVBMVvNbYpwS4D2jE3XImnUXsDWzuqCwBUA28Z1ndKLIjvo0xXrXJSSoPJ6hRu8k5EO+Km+5jYxp0pez3huz3NG9w63YUnNZP37gQo+w/CX7R81koEQoV2eYcmz7cVaAIXOdwoGVJjPpCeK7XYwfQWy3KJeOcS2gshSpR13SPe2s9I++UPB0lRY1+Z1XckDHxh5TJqBMYfEc/I4VGHM0RtcvDJQa38PMQQs4jpZA9uwwbo4WFJ0bifJXIkRygqGBoPMV87V1WGd4FGN/b1oNSYgUJwzeVnr3BGFp0VI2oR++DMmECnPS+ssG1p7Zjh8hslC5aRdA0JhyEFB9cRzOIk93rGhJ8EPx8rlt80VUt6WTaL/HyHmAT45IToHU0CndcpcOedmW0QsRqpn+FI02cYZT/xmCCVHh1vBBr7V8DMxQKjPxQIluvC6JAH6RxtTG/J6z28XMmIqzEU6Xh9DMpyeO0ddGccNxTspGqnIyr/ZnnfnWJTbEV0dq62uBd8AC4NgjefNi7QaPmxL58Ctlc2mlAyY0khA2h1r5XVY4lTsRvEChtr8WaB+kSH5xTmRTcKfigM3lIwea4S0xYYMNpyJQnZRNALQvTmwCuwRI2ehg+RJOIElZj3UhMg9AOi65FaJ2VIee8n1HiQHVkjw=
  on:
    tags: true
    repo: dev-cafe/parselglossy
    python: 3.6
